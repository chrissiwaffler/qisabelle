[["/home/ywu/afp-2021-02-11/thys/Density_Compiler/PDF_Compiler_Pred.thy", "lemma (in density_context) emeasure_bind_if_dens_ctxt_measure: assumes \\<rho>: \"\\<rho> \\<in> space (state_measure V' \\<Gamma>)\" defines \"M \\<equiv> dens_ctxt_measure \\<Y> \\<rho>\" assumes Mf[measurable]: \"f \\<in> measurable M (subprob_algebra (stock_measure BOOL))\" assumes Mg[measurable]: \"g \\<in> measurable M (subprob_algebra R)\" assumes Mh[measurable]: \"h \\<in> measurable M (subprob_algebra R)\" assumes densf: \"has_parametrized_subprob_density (state_measure (V \\<union> V') \\<Gamma>) f (stock_measure BOOL) \\<delta>f\" assumes densg: \"has_parametrized_subprob_density (state_measure V' \\<Gamma>) (\\<lambda>\\<rho>. dens_ctxt_measure (V,V',\\<Gamma>,\\<lambda>\\<sigma>. \\<delta> \\<sigma> * \\<delta>f \\<sigma> (BoolVal True)) \\<rho> \\<bind> g) R \\<delta>g\" assumes densh: \"has_parametrized_subprob_density (state_measure V' \\<Gamma>) (\\<lambda>\\<rho>. dens_ctxt_measure (V,V',\\<Gamma>,\\<lambda>\\<sigma>. \\<delta> \\<sigma> * \\<delta>f \\<sigma> (BoolVal False)) \\<rho> \\<bind> h) R \\<delta>h\" defines \"P \\<equiv> \\<lambda>b. b = BoolVal True\" shows \"M \\<bind> (\\<lambda>x. f x \\<bind> (\\<lambda>b. if P b then g x else h x)) = density R (\\<lambda>x. \\<delta>g \\<rho> x + \\<delta>h \\<rho> x)\" (is \"?lhs = ?rhs\")"]]